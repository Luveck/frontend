<main [ngClass]="{'light': localTheme, 'dark': !localTheme}">
  <header>
    <div class="btnsHeader logo">
      <button class="btnMenu" mat-icon-button (click)="showMenu = !showMenu">
        <mat-icon>menu</mat-icon>
      </button>
      <img
        alt
        class="nav_logo"
        (click)="selectSection('inicio')"
        [src]="localTheme ?'assets/icons/logo_light.png' :'assets/icons/logo_dark.png'"
      />
    </div>
    <div class="btnsHeader">
      <div *ngIf="!sessionService.getToken()">
        <button mat-raised-button color="primary" (click)="onLogin()">
          Iniciar Sesión
        </button>
      </div>
      <mat-form-field
        appearance="outline"
        style="width: 90px; margin-left: 10px; margin-top: 20px"
      >
        <mat-select
          [(ngModel)]="selectedCountry"
          (selectionChange)="changeCountry()"
          [disabled]="sessionService.getToken()?? false"
        >
          <mat-select-trigger>
            <div class="flag">
              <img
                [src]="getFlag(selectedCountry)"
                alt="Flag"
                width="20"
                height="15"
              />
              {{ selectedCountry }}
            </div>
          </mat-select-trigger>
          <mat-option
            *ngFor="let country of countryCombo"
            [value]="country.iso3"
          >
            <div class="flag">
              <img
                [src]="getFlag(country.iso3)"
                alt="Flag"
                width="20"
                height="15"
              />
              {{ country.name }}
            </div>
          </mat-option>
        </mat-select>
      </mat-form-field>
      <button
        style="color: #ffc409"
        mat-icon-button
        matTooltip="Cambiar tema"
        (click)="setTheme()"
      >
        <mat-icon>{{localTheme ?'light_mode' :'brightness_3'}}</mat-icon>
      </button>
      <button
        mat-icon-button
        [matMenuTriggerFor]="perfil"
        matTooltip="Mi Perfil"
        *ngIf="sessionService.getToken()"
      >
        <mat-icon>manage_accounts</mat-icon>
      </button>
      <mat-menu #perfil="matMenu">
        <button mat-menu-item (click)="showProfile()">
          <mat-icon>person</mat-icon>
          Perfil
        </button>
        <button mat-menu-item (click)="onLogout()">
          <mat-icon>logout</mat-icon>
          Cerrar Sesión
        </button>
      </mat-menu>
    </div>
  </header>

  <div class="main_logo">
    <ul
      class="nav_list animated fadeIn"
      [ngClass]="{'show': showMenu === true}"
    >
      <li class="nav_item">
        <button
          class="nav_link"
          [ngClass]="{'active': SectionSelect === 'inicio'}"
          (click)="selectSection('inicio')"
        >
          Inicio
        </button>
      </li>
      <li class="nav_item">
        <button
          class="nav_link"
          [ngClass]="{'active': SectionSelect === 'info'}"
          (click)="selectSection('info')"
        >
          Pasos para obtener tu canje
        </button>
      </li>
      <li class="nav_item">
        <button
          class="nav_link"
          [ngClass]="{'active': SectionSelect === 'productos'}"
          (click)="selectSection('productos')"
        >
          Productos canjeables
        </button>
      </li>
      <li class="nav_item" *ngIf="!sessionService.getToken()">
        <button
          class="nav_link"
          [ngClass]="{'active': SectionSelect === 'registro'}"
          (click)="selectSection('registro')"
        >
          Registrarme en el Programa
        </button>
      </li>
      <li class="nav_item" *ngIf="sessionService.getToken()">
        <button
          class="nav_link"
          [ngClass]="{'active': SectionSelect === 'canjes'}"
          (click)="selectSection('canjes')"
        >
          Información de Canjes
        </button>
      </li>
    </ul>
  </div>

  <app-init
    *ngIf="SectionSelect == 'inicio'"
    class="animated fadeIn"
    (sectionEvent)="selectSection($event)"
  ></app-init>

  <app-beneficios
    *ngIf="SectionSelect == 'info'"
    class="animated fadeIn"
    (sectionEvent)="selectSection($event)"
  ></app-beneficios>

  <app-prods
    *ngIf="SectionSelect == 'productos'"
    class="animated fadeIn"
    [color]="localTheme"
  ></app-prods>

  <app-regis
    *ngIf="SectionSelect == 'registro' && !sessionService.getToken()"
    class="animated fadeIn"
    (sectionEvent)="selectSection($event)"
  ></app-regis>

  <app-canje
    *ngIf="SectionSelect == 'canjes' && sessionService.getToken()"
    class="animated fadeIn"
    (sectionEvent)="selectSection($event.toString())"
  ></app-canje>

  <footer>
    <p>&copy; 2022</p>
    &nbsp;
    <p>Powered by</p>
    <img src="assets/icons/logo-appland.png" alt />
  </footer>
</main>
